import React, { useEffect } from 'react';
import 'bootstrap/dist/css/bootstrap.min.css'
import StockRow from '../Stockrow/StockRow';
import { getStocks } from '../../api/stockService';
import { useDispatch, useSelector } from 'react-redux';
import { setNewUser } from '../../redux/actions/homeActions';
import { StockListTable, StocklistContainer } from './StockListStyles';

const StockList = () => {
    const dispatch = useDispatch()
    const TABLEHEADER_LIST:Array<string> = ['Symbol','Closing Date','Open Price','Highest','Lowest','Close Price','Gain'];
    const listOfStocks: any = useSelector((state:any) => state?.home?.new);


    useEffect (() => {
        // const stockList = async () => {
        //     const res = await getStocks("aapl");
        //     dispatch(setNewUser(res));
        // }
        const LIST = [
            {
                "avgTotalVolume": 534152,
                "calculationPrice": "close",
                "change": 58.64,
                "changePercent": 0.54021,
                "close": 167.19,
                "closeSource": "official",
                "closeTime": 1690574400001,
                "companyName": "Reata Pharmaceuticals Inc - Class A",
                "currency": "USD",
                "delayedPrice": 167.01,
                "delayedPriceTime": 1690574394877,
                "extendedChange": -1.19,
                "extendedChangePercent": -0.00712,
                "extendedPrice": 166,
                "extendedPriceTime": 1690588649091,
                "high": 167.24,
                "highSource": "15 minute delayed price",
                "highTime": 1690574398768,
                "iexAskPrice": 0,
                "iexAskSize": 0,
                "iexBidPrice": 0,
                "iexBidSize": 0,
                "iexClose": 167.01,
                "iexCloseTime": 1690574392057,
                "iexLastUpdated": 1690574392057,
                "iexMarketPercent": 0.06354685571043145,
                "iexOpen": 164.9,
                "iexOpenTime": 1690551000427,
                "iexRealtimePrice": 167.01,
                "iexRealtimeSize": 15,
                "iexVolume": 784213,
                "lastTradeTime": 1690574397229,
                "latestPrice": 167.19,
                "latestSource": "Close",
                "latestTime": "July 28, 2023",
                "latestUpdate": 1690574400001,
                "latestVolume": 12340705,
                "low": 164.25,
                "lowSource": "15 minute delayed price",
                "lowTime": 1690551014805,
                "marketCap": 5523309906,
                "oddLotDelayedPrice": 167.06,
                "oddLotDelayedPriceTime": 1690574394876,
                "open": 164.69,
                "openTime": 1690551000000,
                "openSource": "official",
                "peRatio": -17.31,
                "previousClose": 108.55,
                "previousVolume": 1389175,
                "primaryExchange": "NASDAQ",
                "symbol": "RETA",
                "volume": 12340705,
                "week52High": 167.24,
                "week52Low": 18.47,
                "ytdChange": 2.39754087654646,
                "isUSMarketOpen": false
            },
            {
                "avgTotalVolume": 4470472,
                "calculationPrice": "close",
                "change": 0.87,
                "changePercent": 0.40845,
                "close": 3,
                "closeSource": "official",
                "closeTime": 1690574400065,
                "companyName": "BioNexus Gene Lab Corp",
                "currency": "USD",
                "delayedPrice": 3.1,
                "delayedPriceTime": 1690574395412,
                "extendedChange": -0.16,
                "extendedChangePercent": -0.05333,
                "extendedPrice": 2.84,
                "extendedPriceTime": 1690588798372,
                "high": 3.87,
                "highSource": "15 minute delayed price",
                "highTime": 1690574400065,
                "iexAskPrice": 0,
                "iexAskSize": 0,
                "iexBidPrice": 0,
                "iexBidSize": 0,
                "iexClose": 3.07,
                "iexCloseTime": 1690574377558,
                "iexLastUpdated": 1690574377558,
                "iexMarketPercent": 0.0027003848000501005,
                "iexOpen": 1.84,
                "iexOpenTime": 1690551097569,
                "iexRealtimePrice": 3.07,
                "iexRealtimeSize": 50,
                "iexVolume": 31046,
                "lastTradeTime": 1690574397563,
                "latestPrice": 3,
                "latestSource": "Close",
                "latestTime": "July 28, 2023",
                "latestUpdate": 1690574400065,
                "latestVolume": 11496880,
                "low": 1.8,
                "lowSource": "15 minute delayed price",
                "lowTime": 1690551001246,
                "marketCap": 521154456,
                "oddLotDelayedPrice": 3.1,
                "oddLotDelayedPriceTime": 1690574395410,
                "open": 1.8,
                "openTime": 1690551000000,
                "openSource": "official",
                "peRatio": null,
                "previousClose": 2.13,
                "previousVolume": 1359640,
                "primaryExchange": "NASDAQ",
                "symbol": "BGLC",
                "volume": 11496880,
                "week52High": 9.49,
                "week52Low": 1.8,
                "ytdChange": -0.15417833675564685,
                "isUSMarketOpen": false
            },
            {
                "avgTotalVolume": 7434035,
                "calculationPrice": "close",
                "change": 21.42,
                "changePercent": 0.31412,
                "close": 89.61,
                "closeSource": "official",
                "closeTime": 1690574400030,
                "companyName": "Roku Inc - Class A",
                "currency": "USD",
                "delayedPrice": 89.632,
                "delayedPriceTime": 1690574394677,
                "extendedChange": 1.85,
                "extendedChangePercent": 0.02065,
                "extendedPrice": 91.46,
                "extendedPriceTime": 1690588799436,
                "high": 89.71,
                "highSource": "15 minute delayed price",
                "highTime": 1690574400042,
                "iexAskPrice": 0,
                "iexAskSize": 0,
                "iexBidPrice": 0,
                "iexBidSize": 0,
                "iexClose": 89.62,
                "iexCloseTime": 1690574399752,
                "iexLastUpdated": 1690574399752,
                "iexMarketPercent": 0.01350150292565787,
                "iexOpen": 74.96,
                "iexOpenTime": 1690551001064,
                "iexRealtimePrice": 89.62,
                "iexRealtimeSize": 127,
                "iexVolume": 827666,
                "lastTradeTime": 1690574399753,
                "latestPrice": 89.61,
                "latestSource": "Close",
                "latestTime": "July 28, 2023",
                "latestUpdate": 1690574400030,
                "latestVolume": 61301768,
                "low": 74.88,
                "lowSource": "15 minute delayed price",
                "lowTime": 1690551001065,
                "marketCap": 11057874000,
                "oddLotDelayedPrice": 89.66,
                "oddLotDelayedPriceTime": 1690574394829,
                "open": 75.12,
                "openTime": 1690551000000,
                "openSource": "official",
                "peRatio": -18.71,
                "previousClose": 68.19,
                "previousVolume": 14177698,
                "primaryExchange": "NASDAQ",
                "symbol": "ROKU",
                "volume": 61301768,
                "week52High": 89.71,
                "week52Low": 38.26,
                "ytdChange": 0.9895499754299752,
                "isUSMarketOpen": false
            },
            {
                "avgTotalVolume": 2084649,
                "calculationPrice": "close",
                "change": 3.4,
                "changePercent": 0.30909,
                "close": 14.4,
                "closeSource": "official",
                "closeTime": 1690574400183,
                "companyName": "View Inc. - Class A",
                "currency": "USD",
                "delayedPrice": 14.229,
                "delayedPriceTime": 1690574393045,
                "extendedChange": 0.15,
                "extendedChangePercent": 0.01042,
                "extendedPrice": 14.55,
                "extendedPriceTime": 1690588787533,
                "high": 18.447,
                "highSource": "15 minute delayed price",
                "highTime": 1690574395923,
                "iexAskPrice": 0,
                "iexAskSize": 0,
                "iexBidPrice": 0,
                "iexBidSize": 0,
                "iexClose": 14.1,
                "iexCloseTime": 1690574369469,
                "iexLastUpdated": 1690574369469,
                "iexMarketPercent": 0.006489782690705805,
                "iexOpen": 11.42,
                "iexOpenTime": 1690551210360,
                "iexRealtimePrice": 14.1,
                "iexRealtimeSize": 25,
                "iexVolume": 41012,
                "lastTradeTime": 1690574393045,
                "latestPrice": 14.4,
                "latestSource": "Close",
                "latestTime": "July 28, 2023",
                "latestUpdate": 1690574400183,
                "latestVolume": 6319472,
                "low": 11.1,
                "lowSource": "15 minute delayed price",
                "lowTime": 1690551083632,
                "marketCap": 3484189037,
                "oddLotDelayedPrice": 14.32,
                "oddLotDelayedPriceTime": 1690574394514,
                "open": 11.24,
                "openTime": 1690551000000,
                "openSource": "official",
                "peRatio": null,
                "previousClose": 11,
                "previousVolume": 1662573,
                "primaryExchange": "NASDAQ",
                "symbol": "VIEW",
                "volume": 6319472,
                "week52High": 18.447,
                "week52Low": 0.118,
                "ytdChange": 10.709235092755728,
                "isUSMarketOpen": false
            },
            {
                "avgTotalVolume": 417015,
                "calculationPrice": "close",
                "change": 7.69,
                "changePercent": 0.27722,
                "close": 35.43,
                "closeSource": "official",
                "closeTime": 1690574402109,
                "companyName": "Beazer Homes USA Inc.",
                "currency": "USD",
                "delayedPrice": 35.43,
                "delayedPriceTime": 1690574394420,
                "extendedChange": -0.04,
                "extendedChangePercent": -0.00113,
                "extendedPrice": 35.39,
                "extendedPriceTime": 1690587512974,
                "high": 35.48,
                "highSource": "15 minute delayed price",
                "highTime": 1690574398013,
                "iexAskPrice": 0,
                "iexAskSize": 0,
                "iexBidPrice": 0,
                "iexBidSize": 0,
                "iexClose": 35.43,
                "iexCloseTime": 1690574396820,
                "iexLastUpdated": 1690574396820,
                "iexMarketPercent": 0.0358703464399938,
                "iexOpen": 30.08,
                "iexOpenTime": 1690551137172,
                "iexRealtimePrice": 35.43,
                "iexRealtimeSize": 14,
                "iexVolume": 88188,
                "lastTradeTime": 1690574398013,
                "latestPrice": 35.43,
                "latestSource": "Close",
                "latestTime": "July 28, 2023",
                "latestUpdate": 1690574402109,
                "latestVolume": 2458521,
                "low": 30.08,
                "lowSource": "IEX real time price",
                "lowTime": 1690551137172,
                "marketCap": 1110625982,
                "oddLotDelayedPrice": 35.45,
                "oddLotDelayedPriceTime": 1690574395068,
                "open": 30.4,
                "openTime": 1690551000000,
                "openSource": "official",
                "peRatio": 5.43,
                "previousClose": 27.74,
                "previousVolume": 483895,
                "primaryExchange": "NEW YORK STOCK EXCHANGE INC.",
                "symbol": "BZH",
                "volume": 2458521,
                "week52High": 35.48,
                "week52Low": 9.47,
                "ytdChange": 1.4512011912225706,
                "isUSMarketOpen": false
            },
            {
                "avgTotalVolume": 645484,
                "calculationPrice": "close",
                "change": 4.72,
                "changePercent": 0.26383,
                "close": 22.61,
                "closeSource": "official",
                "closeTime": 1690574400047,
                "companyName": "UroGen Pharma Ltd",
                "currency": "USD",
                "delayedPrice": 22.67,
                "delayedPriceTime": 1690574395028,
                "extendedChange": -0.11,
                "extendedChangePercent": -0.00487,
                "extendedPrice": 22.5,
                "extendedPriceTime": 1690588767926,
                "high": 23.93,
                "highSource": "15 minute delayed price",
                "highTime": 1690574397522,
                "iexAskPrice": 0,
                "iexAskSize": 0,
                "iexBidPrice": 0,
                "iexBidSize": 0,
                "iexClose": 22.645,
                "iexCloseTime": 1690574393674,
                "iexLastUpdated": 1690574393674,
                "iexMarketPercent": 0.031119687906634254,
                "iexOpen": 16.535,
                "iexOpenTime": 1690551002761,
                "iexRealtimePrice": 22.645,
                "iexRealtimeSize": 2,
                "iexVolume": 246809,
                "lastTradeTime": 1690574397516,
                "latestPrice": 22.61,
                "latestSource": "Close",
                "latestTime": "July 28, 2023",
                "latestUpdate": 1690574400047,
                "latestVolume": 7930960,
                "low": 16.05,
                "lowSource": "15 minute delayed price",
                "lowTime": 1690551238277,
                "marketCap": 530287524,
                "oddLotDelayedPrice": 22.66,
                "oddLotDelayedPriceTime": 1690574396380,
                "open": 16.53,
                "openTime": 1690551000000,
                "openSource": "official",
                "peRatio": null,
                "previousClose": 17.89,
                "previousVolume": 9466033,
                "primaryExchange": "NASDAQ",
                "symbol": "URGN",
                "volume": 7930960,
                "week52High": 23.93,
                "week52Low": 6.87,
                "ytdChange": 1.2807409357384445,
                "isUSMarketOpen": false
            },
            {
                "avgTotalVolume": 83042,
                "calculationPrice": "close",
                "change": 1.78,
                "changePercent": 0.25612,
                "close": 8.73,
                "closeSource": "official",
                "closeTime": 1690574400395,
                "companyName": "Pulse Biosciences Inc",
                "currency": "USD",
                "delayedPrice": 8.79,
                "delayedPriceTime": 1690574395267,
                "extendedChange": -0.2,
                "extendedChangePercent": -0.02291,
                "extendedPrice": 8.53,
                "extendedPriceTime": 1690588500251,
                "high": 8.8,
                "highSource": "15 minute delayed price",
                "highTime": 1690574397690,
                "iexAskPrice": 0,
                "iexAskSize": 0,
                "iexBidPrice": 0,
                "iexBidSize": 0,
                "iexClose": 8.74,
                "iexCloseTime": 1690574297537,
                "iexLastUpdated": 1690574297537,
                "iexMarketPercent": 0.006851947007439512,
                "iexOpen": 7.16,
                "iexOpenTime": 1690552199521,
                "iexRealtimePrice": 8.74,
                "iexRealtimeSize": 33,
                "iexVolume": 3067,
                "lastTradeTime": 1690574397684,
                "latestPrice": 8.73,
                "latestSource": "Close",
                "latestTime": "July 28, 2023",
                "latestUpdate": 1690574400395,
                "latestVolume": 447610,
                "low": 7.08,
                "lowSource": "15 minute delayed price",
                "lowTime": 1690551000152,
                "marketCap": 328613717,
                "oddLotDelayedPrice": 8.78,
                "oddLotDelayedPriceTime": 1690574395388,
                "open": 7.08,
                "openTime": 1690551000000,
                "openSource": "official",
                "peRatio": null,
                "previousClose": 6.95,
                "previousVolume": 107381,
                "primaryExchange": "NASDAQ",
                "symbol": "PLSE",
                "volume": 447610,
                "week52High": 9.69,
                "week52Low": 1.18,
                "ytdChange": 1.765145270758123,
                "isUSMarketOpen": false
            },
            {
                "avgTotalVolume": 9232590,
                "calculationPrice": "close",
                "change": 2.56,
                "changePercent": 0.23903,
                "close": 13.27,
                "closeSource": "official",
                "closeTime": 1690574402235,
                "companyName": "QuantumScape Corp - Class A",
                "currency": "USD",
                "delayedPrice": 13.265,
                "delayedPriceTime": 1690574394686,
                "extendedChange": -0.09,
                "extendedChangePercent": -0.00678,
                "extendedPrice": 13.18,
                "extendedPriceTime": 1690588797034,
                "high": 13.52,
                "highSource": "15 minute delayed price",
                "highTime": 1690574399548,
                "iexAskPrice": 0,
                "iexAskSize": 0,
                "iexBidPrice": 0,
                "iexBidSize": 0,
                "iexClose": 13.26,
                "iexCloseTime": 1690574398062,
                "iexLastUpdated": 1690574398062,
                "iexMarketPercent": 0.013485635539387418,
                "iexOpen": 11.17,
                "iexOpenTime": 1690551005877,
                "iexRealtimePrice": 13.26,
                "iexRealtimeSize": 126,
                "iexVolume": 589036,
                "lastTradeTime": 1690574399548,
                "latestPrice": 13.27,
                "latestSource": "Close",
                "latestTime": "July 28, 2023",
                "latestUpdate": 1690574402235,
                "latestVolume": 43678772,
                "low": 10.95,
                "lowSource": "15 minute delayed price",
                "lowTime": 1690551076125,
                "marketCap": 4959118377,
                "oddLotDelayedPrice": 13.27,
                "oddLotDelayedPriceTime": 1690574396133,
                "open": 11.2,
                "openTime": 1690551000000,
                "openSource": "official",
                "peRatio": null,
                "previousClose": 10.71,
                "previousVolume": 54832694,
                "primaryExchange": "NEW YORK STOCK EXCHANGE INC.",
                "symbol": "QS",
                "volume": 43678772,
                "week52High": 13.86,
                "week52Low": 5.11,
                "ytdChange": 1.1279188888888891,
                "isUSMarketOpen": false
            },
            {
                "avgTotalVolume": 57076,
                "calculationPrice": "close",
                "change": 3.94,
                "changePercent": 0.23163,
                "close": 20.95,
                "closeSource": "official",
                "closeTime": 1690574400178,
                "companyName": "Business First Bancshares Inc.",
                "currency": "USD",
                "delayedPrice": 20.95,
                "delayedPriceTime": 1690574395706,
                "extendedChange": -0.75,
                "extendedChangePercent": -0.0358,
                "extendedPrice": 20.2,
                "extendedPriceTime": 1690587584585,
                "high": 22.49,
                "highSource": "15 minute delayed price",
                "highTime": 1690574396786,
                "iexAskPrice": 0,
                "iexAskSize": 0,
                "iexBidPrice": 0,
                "iexBidSize": 0,
                "iexClose": 20.99,
                "iexCloseTime": 1690574390420,
                "iexLastUpdated": 1690574390420,
                "iexMarketPercent": 0.05352043864774487,
                "iexOpen": 19.18,
                "iexOpenTime": 1690551461593,
                "iexRealtimePrice": 20.99,
                "iexRealtimeSize": 1,
                "iexVolume": 16213,
                "lastTradeTime": 1690574395706,
                "latestPrice": 20.95,
                "latestSource": "Close",
                "latestTime": "July 28, 2023",
                "latestUpdate": 1690574400178,
                "latestVolume": 302931,
                "low": 18.88,
                "lowSource": "15 minute delayed price",
                "lowTime": 1690551472255,
                "marketCap": 530974901,
                "oddLotDelayedPrice": 20.95,
                "oddLotDelayedPriceTime": 1690574395041,
                "open": 19.85,
                "openTime": 1690551000000,
                "openSource": "official",
                "peRatio": null,
                "previousClose": 17.01,
                "previousVolume": 57655,
                "primaryExchange": "NASDAQ",
                "symbol": "BFST",
                "volume": 302931,
                "week52High": 24.34,
                "week52Low": 12.83,
                "ytdChange": 0.017816050166157615,
                "isUSMarketOpen": false
            },
            {
                "avgTotalVolume": 645207,
                "calculationPrice": "close",
                "change": 2.09,
                "changePercent": 0.22,
                "close": 11.59,
                "closeSource": "official",
                "closeTime": 1690574402243,
                "companyName": "Costamare Inc",
                "currency": "USD",
                "delayedPrice": 11.59,
                "delayedPriceTime": 1690574396223,
                "extendedChange": -0.07,
                "extendedChangePercent": -0.00604,
                "extendedPrice": 11.52,
                "extendedPriceTime": 1690585962553,
                "high": 11.85,
                "highSource": "15 minute delayed price",
                "highTime": 1690574398180,
                "iexAskPrice": 0,
                "iexAskSize": 0,
                "iexBidPrice": 0,
                "iexBidSize": 0,
                "iexClose": 11.58,
                "iexCloseTime": 1690574397111,
                "iexLastUpdated": 1690574397111,
                "iexMarketPercent": 0.013213924513285876,
                "iexOpen": 9.96,
                "iexOpenTime": 1690551034683,
                "iexRealtimePrice": 11.58,
                "iexRealtimeSize": 5,
                "iexVolume": 58677,
                "lastTradeTime": 1690574398082,
                "latestPrice": 11.59,
                "latestSource": "Close",
                "latestTime": "July 28, 2023",
                "latestUpdate": 1690574402243,
                "latestVolume": 4440543,
                "low": 9.72,
                "lowSource": "15 minute delayed price",
                "lowTime": 1690551031697,
                "marketCap": 1421929442,
                "oddLotDelayedPrice": 11.59,
                "oddLotDelayedPriceTime": 1690574395452,
                "open": 10,
                "openTime": 1690551000000,
                "openSource": "official",
                "peRatio": 2.58,
                "previousClose": 9.5,
                "previousVolume": 470894,
                "primaryExchange": "NEW YORK STOCK EXCHANGE INC.",
                "symbol": "CMRE",
                "volume": 4440543,
                "week52High": 11.85,
                "week52Low": 7.62,
                "ytdChange": 0.27996027938321455,
                "isUSMarketOpen": false
            }
        ]
        dispatch(setNewUser(LIST));
        //stockList();
    },[]);

  return (
      <StocklistContainer>
          <StockListTable>
              <table className="table mt-5">
                  <thead>
                      <tr>
                          {TABLEHEADER_LIST?.map((list, index) => <th key={index}>{list}</th>)}
                      </tr>
                  </thead>
                  <tbody>
                      <StockRow rowStock={listOfStocks} />
                  </tbody>
              </table>
          </StockListTable>
      </StocklistContainer>
  );
}

export default StockList;
